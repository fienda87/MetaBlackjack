{
  "tech_stack": [
    "TypeScript",
    "Next.js 15.3.5",
    "React",
    "Prisma ORM",
    "SQLite",
    "Socket.IO",
    "Redux Toolkit",
    "TailwindCSS",
    "Shadcn UI"
  ],
  "features": [
    {
      "name": "Game Engine",
      "description": "Core blackjack game logic engine that processes moves (HIT, STAND, DOUBLE, SPLIT, SURRENDER, INSURANCE), calculates scores, determines winners, handles dealer AI, and manages game state transitions",
      "files": [
        "src/domain/usecases/GameEngine.ts",
        "src/lib/game-logic.ts",
        "src/domain/entities/Game.ts"
      ]
    },
    {
      "name": "Game API - Play Endpoint",
      "description": "REST API endpoint to start new games and process game moves. Accepts userId, betAmount, and moveType. Returns updated game state with player/dealer hands, scores, and result",
      "files": [
        "src/app/api/game/play/route.ts"
      ]
    },
    {
      "name": "Game API - Action Endpoint",
      "description": "REST API endpoint for performing game actions on existing games. Handles HIT, STAND, DOUBLE, SPLIT operations",
      "files": [
        "src/app/api/game/action/route.ts"
      ]
    },
    {
      "name": "Game Repository",
      "description": "Data access layer for game persistence using Prisma. Handles CRUD operations, state mapping (BETTING/PLAYING/DEALER/FINISHED), result mapping (WIN/LOSE/PUSH/BLACKJACK), and move type mapping",
      "files": [
        "src/infrastructure/repositories/PrismaGameRepository.ts",
        "src/domain/repositories/GameRepository.ts"
      ]
    },
    {
      "name": "Game History",
      "description": "API and UI components for viewing game history with filters (date range, result type), pagination, and statistics. Includes optimized virtualized list rendering",
      "files": [
        "src/app/api/history/route.ts",
        "src/components/GameHistory.tsx",
        "src/components/OptimizedGameHistory.tsx"
      ]
    },
    {
      "name": "Wallet Authentication",
      "description": "Crypto wallet authentication system supporting Web3 wallet connections. Handles wallet signature verification, user creation/login, and session management with mock wallets for testing",
      "files": [
        "src/app/api/auth/wallet/route.ts",
        "src/components/WalletConnection.tsx"
      ]
    },
    {
      "name": "User Management",
      "description": "User CRUD operations, balance management, admin functions for balance adjustments, user statistics tracking (total games, wins, losses, net profit)",
      "files": [
        "src/app/api/user/route.ts",
        "src/app/api/user/[id]/route.ts",
        "src/app/api/user/update/route.ts",
        "src/app/api/users/route.ts"
      ]
    },
    {
      "name": "Game Session Management",
      "description": "Tracks player sessions, aggregates stats (total games, total bet, total win, net profit), maintains session history with automatic expiration after 2 hours of inactivity",
      "files": [
        "src/app/api/game/play/route.ts",
        "prisma/schema.prisma"
      ]
    },
    {
      "name": "Transaction System",
      "description": "Records all financial transactions (bets, wins, losses, store purchases, bonuses) with balance tracking (before/after), transaction types, and metadata",
      "files": [
        "src/app/api/game/play/route.ts",
        "src/app/api/store/purchase/route.ts",
        "prisma/schema.prisma"
      ]
    },
    {
      "name": "Store System",
      "description": "In-game store for purchasing items, avatars, themes, and power-ups. Handles inventory management, purchase validation, balance deduction",
      "files": [
        "src/app/api/store/purchase/route.ts",
        "src/components/StoreView.tsx"
      ]
    },
    {
      "name": "Health Check API",
      "description": "System health monitoring endpoint. Tests database connectivity, reports query metrics (count, duration, slow queries), provides response time diagnostics",
      "files": [
        "src/app/api/health/route.ts",
        "src/lib/production-db.ts"
      ]
    },
    {
      "name": "Real-time Game Sync",
      "description": "Socket.IO integration for real-time game updates, multiplayer synchronization, live notifications, and instant state updates across connected clients",
      "files": [
        "src/lib/socket.ts",
        "server.ts"
      ]
    },
    {
      "name": "Game UI Components",
      "description": "React components for blackjack gameplay: card rendering, dealer/player hands display, action buttons (HIT/STAND/DOUBLE/SPLIT/SURRENDER), betting interface, score calculation, game result modal",
      "files": [
        "src/components/GameTable.tsx",
        "src/components/OptimizedGameTable.tsx",
        "src/components/CardDeck.tsx",
        "src/components/GameResultModal.tsx"
      ]
    },
    {
      "name": "Admin Panel",
      "description": "Administrative dashboard for user management, balance adjustments, game monitoring, statistics viewing, and system configuration",
      "files": [
        "src/components/AdminPanel.tsx"
      ]
    },
    {
      "name": "Security Layer",
      "description": "Security utilities including password hashing (bcrypt), data encryption (AES-256-GCM), rate limiting, API key management, audit logging, and secure token generation",
      "files": [
        "src/lib/security.ts",
        "src/lib/db-security.ts"
      ]
    },
    {
      "name": "Database Schema",
      "description": "Prisma schema defining all data models: User, Game, GameSession, Transaction, StoreItem, Purchase with relationships, indexes, and field validations",
      "files": [
        "prisma/schema.prisma"
      ]
    },
    {
      "name": "State Management",
      "description": "Redux store with slices for game state, user state, wallet connection, UI settings, and async thunks for API calls",
      "files": [
        "src/store/gameSlice.ts",
        "src/store/userSlice.ts",
        "src/store/walletSlice.ts",
        "src/store/store.ts"
      ]
    },
    {
      "name": "Performance Monitoring",
      "description": "Performance tracking utilities for monitoring operation timing, identifying bottlenecks, and optimizing React component rendering",
      "files": [
        "src/shared/utils/performance.ts",
        "src/hooks/useVirtualization.ts"
      ]
    }
  ]
}
